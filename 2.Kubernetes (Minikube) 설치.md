## 2ë‹¨ê³„: Kubernetes (Minikube) ì„¤ì¹˜
ë‹¨ì¼ ì„œë²„ í™˜ê²½ì´ë¯€ë¡œ Minikubeë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. MinikubeëŠ” ë¡œì»¬ í™˜ê²½ì—ì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2-1. kubectl ì„¤ì¹˜
```bash
# 1. kubectl ë‹¤ìš´ë¡œë“œ
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"

# 2. ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ ë° ì´ë™
sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

# 3. ì„¤ì¹˜ í™•ì¸
kubectl version --client
```

**ì˜ˆìƒ ì¶œë ¥:**
```
Client Version: v1.28.x
Kustomize Version: v5.x.x
```

### 2-2. Minikube ì„¤ì¹˜
```bash
# 1. Minikube ë‹¤ìš´ë¡œë“œ
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64

# 2. ì„¤ì¹˜
sudo install minikube-linux-amd64 /usr/local/bin/minikube

# 3. ì„¤ì¹˜ í™•ì¸
minikube version
```

**ì˜ˆìƒ ì¶œë ¥:**
```
minikube version: v1.32.x
commit: xxxxx
```

### 2-3. Minikube í´ëŸ¬ìŠ¤í„° ì‹œì‘
```bash
# 1. Minikube ì‹œì‘ (Docker ë“œë¼ì´ë²„ ì‚¬ìš©, ë¦¬ì†ŒìŠ¤ ì„¤ì •)
minikube start --driver=docker \
  --cpus=4 \
  --memory=8192 \
  --disk-size=50g \
  --kubernetes-version=v1.28.0

# ì´ ê³¼ì •ì€ 5-10ë¶„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤
```

**ì˜ˆìƒ ì¶œë ¥ (ì§„í–‰ ê³¼ì •):**
```
ğŸ˜„  AlmaLinux 9 ìœ„ì˜ minikube v1.32.x
âœ¨  ìë™ì ìœ¼ë¡œ docker ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¤‘
ğŸ‘  minikube í´ëŸ¬ìŠ¤í„°ì˜ minikube ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œë¥¼ ì‹œì‘í•˜ëŠ” ì¤‘
ğŸšœ  ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ëŠ” ì¤‘ ...
ğŸ”¥  Creating docker container (CPUs=4, Memory=8192MB) ...
ğŸ³  ì¿ ë²„ë„¤í‹°ìŠ¤ v1.28.0 ì„ Docker 24.0.x ëŸ°íƒ€ì„ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì¤‘
ğŸ”—  Configuring bridge CNI (Container Networking Interface) ...
ğŸ”  Kubernetes êµ¬ì„± ìš”ì†Œë¥¼ í™•ì¸...
ğŸŒŸ  ì• ë“œì˜¨ í™œì„±í™” : storage-provisioner, default-storageclass
ğŸ„  ëë‚¬ìŠµë‹ˆë‹¤! kubectlì´ "minikube" í´ëŸ¬ìŠ¤í„°ì™€ "default" ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
```

### 2-4. Minikube ìƒíƒœ í™•ì¸
```bash
# 1. Minikube ìƒíƒœ
minikube status

# 2. kubectlë¡œ ë…¸ë“œ í™•ì¸
kubectl get nodes

# 3. ëª¨ë“  Pod í™•ì¸
kubectl get pods -A
```

**ì˜ˆìƒ ì¶œë ¥:**
```
=== minikube status ===
minikube
type: Control Plane
host: Running
kubelet: Running
apiserver: Running
kubeconfig: Configured
=== kubectl get nodes ===
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   2m    v1.28.0
=== kubectl get pods -A ===
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-xxx                        1/1     Running   0          2m
kube-system   etcd-minikube                      1/1     Running   0          2m
kube-system   kube-apiserver-minikube            1/1     Running   0          2m
kube-system   kube-controller-manager-minikube   1/1     Running   0          2m
kube-system   kube-proxy-xxx                     1/1     Running   0          2m
kube-system   kube-scheduler-minikube            1/1     Running   0          2m
kube-system   storage-provisioner                1/1     Running   0          2m
```

### 2-5. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
```bash
# 1. dev ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
kubectl create namespace dev

# 2. prod ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
kubectl create namespace prod

# 3. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
kubectl get namespaces
```

**ì˜ˆìƒ ì¶œë ¥:**
```
NAME              STATUS   AGE
default           Active   5m
dev               Active   10s
kube-node-lease   Active   5m
kube-public       Active   5m
kube-system       Active   5m
prod              Active   5s
```

### 2-6. Minikube ì• ë“œì˜¨ í™œì„±í™” (ì„ íƒì‚¬í•­)
```bash
# 1. ìœ ìš©í•œ ì• ë“œì˜¨ í™œì„±í™”
minikube addons enable ingress          # Ingress Controller
minikube addons enable metrics-server   # ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§
minikube addons enable dashboard        # Kubernetes Dashboard

# 2. í™œì„±í™”ëœ ì• ë“œì˜¨ í™•ì¸
minikube addons list | grep enabled
```

**ì˜ˆìƒ ì¶œë ¥:**
```
| ingress                     | minikube | enabled âœ…   |
| metrics-server              | minikube | enabled âœ…   |
| dashboard                   | minikube | enabled âœ…   |
| default-storageclass        | minikube | enabled âœ…   |
| storage-provisioner         | minikube | enabled âœ…   |
```

### 2-7. Minikube Docker í™˜ê²½ ì„¤ì • (ì¤‘ìš”!)
Minikube ë‚´ë¶€ì˜ Dockerë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ë©´ ì´ë¯¸ì§€ë¥¼ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‹œí•˜ì§€ ì•Šê³ ë„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```bash
# 1. Minikube Docker í™˜ê²½ ë³€ìˆ˜ í™•ì¸
minikube docker-env

# 2. í™˜ê²½ ë³€ìˆ˜ ì ìš© ëª…ë ¹ì–´ ë³µì‚¬
# ì¶œë ¥ëœ ë§ˆì§€ë§‰ ì¤„ì˜ eval ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”
```

**ì˜ˆìƒ ì¶œë ¥:**
```
export DOCKER_HOST="tcp://192.168.49.2:2376"
export DOCKER_TLS_VERIFY="1"
export DOCKER_CERT_PATH="/home/user/.minikube/certs"
export MINIKUBE_ACTIVE_DOCKERD="minikube"
# To point your shell to minikube's docker-daemon, run:
# eval $(minikube -p minikube docker-env)
```

**ì£¼ì˜:** ì§€ê¸ˆì€ ì‹¤í–‰í•˜ì§€ ë§ˆì„¸ìš”. ë‚˜ì¤‘ì— í•„ìš”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 2-8. Kubernetes Dashboard ì ‘ì† (ì„ íƒì‚¬í•­)
```bash
# Dashboard ì‹¤í–‰ (ìƒˆ í„°ë¯¸ë„ì—ì„œ ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œë¡œ)
minikube dashboard --url

# ì¶œë ¥ëœ URLë¡œ ë¸Œë¼ìš°ì € ì ‘ì†
```

**ì˜ˆìƒ ì¶œë ¥:**
```
ğŸ¤”  Verifying dashboard health ...
ğŸš€  Launching proxy ...
ğŸ¤”  Verifying proxy health ...
http://127.0.0.1:xxxxx/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/
```

---

## 2ë‹¨ê³„ í™•ì¸ì‚¬í•­
ë‹¤ìŒ í•­ëª©ë“¤ì´ ëª¨ë‘ ì •ìƒì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”:

**í™•ì¸ ëª…ë ¹ì–´ (í•œ ë²ˆì— í™•ì¸):**
```bash
echo "=== Minikube ìƒíƒœ ==="
minikube status

echo -e "\n=== kubectl ë²„ì „ ==="
kubectl version --short

echo -e "\n=== ë…¸ë“œ ìƒíƒœ ==="
kubectl get nodes

echo -e "\n=== ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ==="
kubectl get ns

echo -e "\n=== ì‹œìŠ¤í…œ Pod ìƒíƒœ ==="
kubectl get pods -n kube-system

echo -e "\n=== dev/prod ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸ ==="
kubectl get ns dev prod
```
